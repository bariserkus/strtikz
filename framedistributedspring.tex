\pgfkeys{
 /framedistributedspring/.is family, /framedistributedspring,
  default/.style={startx = 0cm,
  starty = 0cm,
  endx = 5cm,
  endy = 5cm,
  number of springs = 10,
  mirror springs = 1,
  space = 0.1cm,
  start ratio = 0.02,
  end ratio = 0.02,
  spring text = {},
  text color= black,
  text shiftx=0pt,
  text shifty=0pt,
  text location=above,
  spring length=1cm,
  spring prelength ratio=0.25,
  spring postlength ratio=0.25,
  spring width=0.07cm,
  spring segment=0.15cm,
  spring scale=1,
  spring line thickness=1pt,
  spring color=black,
  support width=0.3cm,
  support depth = 0.1cm,
  support line thickness = 1pt,
  show support shade=1,
  support shade color=gray,},
  startx/.store in = \springstartcoordx,
  starty/.store in = \springstartcoordy,
  endx/.store in = \springendcoordx,
  endy/.store in = \springendcoordy,
  number of springs/.store in = \springnumber,
  mirror springs/.store in = \mirrorspring,
  space/.store in = \springspace,
  start ratio/.store in = \springstartratio,
  end ratio/.store in = \springendratio,
  spring text/.store in = \springtext,
  text color/.store in = \textcolor,
  text shiftx/.store in = \textshiftx,
  text shifty/.store in = \textshifty,
  text location/.store in = \loc,
  spring length/.store in = \springlength,
  spring prelength ratio/.store in = \prelenratio,
  spring postlength ratio/.store in = \postlenratio,
  spring width/.store in = \ampl,
  spring segment/.store in = \segm,
  spring scale/.store in = \springscale,
  spring line thickness/.store in = \springthk,
  spring color/.store in = \springcolor,
  support width/.store in = \suppwidth,
  support depth/.store in = \suppdepth,
  support line thickness/.store in = \supplinethk,
  show support shade/.store in = \showsuppshade,
  support shade color/.store in = \suppshadecol,}

\newcommand{\framedistributedspring}[1][]{
\pgfkeys{/framedistributedspring, default, #1}
\tikzmath{
real \springstartcoordx, \springstartcoordy, \springendcoordx, \springendcoordy;
real \springangle, \springunx, \springuny, \springdxf, \springdyf;
real \springdxa, \springdya, \springaaa, \springbbb;
real \springxvalue, \springyvalue;
real \springwxvalue, \springwyvalue, \springheight, \springstartratio, \springendratio, \lenf;
int \springnumber, \springnumbermo, \ijk, \j;
real \rnarr;
real \springscale;
real \textshiftx, \textshifty;
real \springthk, \ampl, \prelenratio, \postlenratio, \prelength, \postlength, \segm;
real \springlength, \sprspang;
real \supportdist, \supportdistdx, \supportdistdy, \supportendx, \supportendy;
real \suppwidth, \supdepth, \supplinethk;
int \showsuppshade, \fixangle, \fixtextspace;
%Conversion all units to the unit pt
\springstartcoordx = \springstartcoordx;
\springstartcoordy = \springstartcoordy;
\springendcoordx = \springendcoordx;
\springendcoordy = \springendcoordy;
\springspace = \springspace;
\textshiftx=\textshiftx;
\textshifty=\textshifty;
\springlength=\springlength;
\springthk=\springthk;
\ampl=\ampl;
\segm=\segm;
\suppwidth=\suppwidth;
\suppdepth=\suppdepth;
\supplinethk=\supplinethk;
%End conversion, All values are now in pt units.
\prelength=\prelenratio*\springlength;
\postlength=\postlenratio*\springlength;
\springdxf = (\springendcoordx-\springstartcoordx); %dx for the whole frame
\springdyf = (\springendcoordy-\springstartcoordy); %dy for the whole frame
\lenf = veclen(\springdxf, \springdyf);
\springangle = atan2(\springdyf,\springdxf);
\springdxa = \springdxf*(1-(\springstartratio+\springendratio)); %dx for the start and end of spring
\springdya = \springdyf*(1-(\springstartratio+\springendratio)); %dy for the start and end of spring
\lena = veclen(\springdxa, \springdya);
\rnarr = \springnumber;
\springwxvalue = (\springdxa)/(\rnarr-1); %dx for the single spring
\springwyvalue = (\springdya)/(\rnarr-1); %dx for the single spring
\springxvalue{1} = \springstartcoordx + \springdxf*(\springstartratio);
\springyvalue{1} = \springstartcoordy + \springdyf*(\springstartratio);
\springxvalue{\springnumber} = \springendcoordx - \springdxf*(\springendratio);
\springyvalue{\springnumber} = \springendcoordy - \springdyf*(\springendratio);
for \ijk in {2,...,{\springnumber-1}}{
\springxvalue{\ijk} = \springxvalue{1} + (\ijk-1)*\springwxvalue;
\springyvalue{\ijk} = \springyvalue{1} + (\ijk-1)*\springwyvalue;
};
\springnumbermo = \springnumber-1;
%
if equal(\mirrorspring,1) then {\fixangle=-1;};
if equal(\mirrorspring,0) then {\fixangle= 1;};
\sprspang=\fixangle*90+\springangle;
\supportdist=\springspace+\springlength;
\supportdistdx=cos(\sprspang)*\supportdist;
\supportdistdy=sin(\sprspang)*\supportdist;
for \ijk in {1,...,{\springnumber}}{
	\supportendx{\ijk} = \springxvalue{\ijk} + \supportdistdx;
	\supportendy{\ijk} = \springyvalue{\ijk} + \supportdistdy;
};
\totalspringsupportlength=\suppdepth+\springspace+\springlength;
%\loc = ifthenelse(\totalspringsupportlength>=0,"above","below");
}


%\node at(0,2cm) {\segm};

\begin{scope}[x=1pt, y=1pt]; % Drawing everything in pt units
\foreach \ijk in {1,...,\springnumber}{
\draw[line width=\springthk, \springcolor, line join=round,
decorate,
decoration={zigzag,
	amplitude=\ampl,
	pre length=\prelength,
	post length=\postlength,
	segment length=\segm,}] 
(\springxvalue{\ijk}, \springyvalue{\ijk})
++(\sprspang:\springspace) --
++(\sprspang:\springlength);

\fixedsupport[%
support width = \suppwidth,
support depth = \suppdepth,
line thickness = \supplinethk,
x value = \supportendx{\ijk},
y value = \supportendy{\ijk},
rotation = 90+\sprspang,
show shade=\showsuppshade,
shade color=\suppshadecol,]

}

\path[](\springstartcoordx,\springstartcoordy) -- ++(\sprspang:\totalspringsupportlength) --
node[\loc,sloped, xshift=\textshiftx, yshift=\textshifty, inner sep=1pt, \textcolor]
{\springtext} ++(\springdxf,\springdyf);

\end{scope}
}

